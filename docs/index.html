<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Calculadora Fitness PRO</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f7ff;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:15px;
  background:#0b5cff;
  color:#fff;
}

.menuBtn{
  background:#fff;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}

.drawer{
  position:fixed;
  left:-250px;
  top:0;
  width:250px;
  height:100%;
  background:#fff;
  box-shadow:2px 0 10px rgba(0,0,0,0.2);
  transition:0.3s;
  padding:15px;
}

.drawer.open{
  left:0;
}

.navItem{
  padding:12px;
  border:1px solid #ddd;
  margin-bottom:10px;
  border-radius:10px;
  cursor:pointer;
}

.screen{
  display:none;
  padding:20px;
}

.screen.active{
  display:block;
}

.btn{
  padding:10px 14px;
  border:none;
  background:#0b5cff;
  color:#fff;
  border-radius:10px;
  cursor:pointer;
  margin-top:10px;
}

input{
  padding:8px;
  width:100%;
  margin-bottom:10px;
}
</style>
</head>

<body>

<div class="header">
  <button class="menuBtn" id="menuOpen">â˜°</button>
  <h3>Fitness PRO</h3>
</div>

<div class="drawer" id="drawer">
  <div class="navItem" data-screen="screen-imc">ðŸ§® IMC</div>
  <div class="navItem" data-screen="screen-foto">ðŸ“¸ Foto Fit</div>
</div>

<!-- IMC -->
<section class="screen active" id="screen-imc">
  <h2>Calculadora IMC</h2>
  <input type="number" id="peso" placeholder="Peso (kg)">
  <input type="number" id="altura" placeholder="Altura (m)">
  <button class="btn" id="calcBtn">Calcular</button>
  <h3 id="resultado"></h3>
</section>

<!-- FOTO FIT -->
<section class="screen" id="screen-foto">
  <h2>Foto Fit LP</h2>

  <input id="cameraInput" type="file" accept="image/*" capture="environment" style="display:none">

  <button class="btn" id="openCameraBtn">Abrir CÃ¢mera</button>
  <button class="btn" id="downloadBtn" disabled>Baixar com Marca</button>

  <p id="photoHint"></p>

  <img id="photoPreview" style="width:100%;margin-top:15px;display:none;">
  <canvas id="photoCanvas" style="display:none;"></canvas>
</section>

<script>
/* MENU */
const drawer = document.getElementById("drawer");
document.getElementById("menuOpen").onclick = ()=>{
  drawer.classList.toggle("open");
};

document.querySelectorAll(".navItem").forEach(item=>{
  item.onclick = ()=>{
    document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
    document.getElementById(item.dataset.screen).classList.add("active");
    drawer.classList.remove("open");
  }
});

/* IMC */
document.getElementById("calcBtn").onclick = ()=>{
  const peso = parseFloat(document.getElementById("peso").value);
  const altura = parseFloat(document.getElementById("altura").value);

  if(!peso || !altura){
    alert("Preencha peso e altura.");
    return;
  }

  const imc = peso/(altura*altura);
  document.getElementById("resultado").innerText = "IMC: "+imc.toFixed(2);
};

/* FOTO FIT (iPhone compatÃ­vel) */
const cameraInput = document.getElementById("cameraInput");
const openCameraBtn = document.getElementById("openCameraBtn");
const downloadBtn = document.getElementById("downloadBtn");
const photoPreview = document.getElementById("photoPreview");
const photoCanvas = document.getElementById("photoCanvas");
const photoHint = document.getElementById("photoHint");

let lastDataUrl = null;

openCameraBtn.onclick = ()=>{
  cameraInput.click();
};

cameraInput.onchange = ()=>{
  const file = cameraInput.files[0];
  if(!file) return;

  const url = URL.createObjectURL(file);
  photoPreview.src = url;
  photoPreview.style.display = "block";
  downloadBtn.disabled = false;
  photoHint.innerText = "Foto carregada! Clique em baixar.";

  const img = new Image();
  img.onload = ()=>{
    photoCanvas.width = img.width;
    photoCanvas.height = img.height;

    const ctx = photoCanvas.getContext("2d");
    ctx.drawImage(img,0,0);

    ctx.font = "bold 40px Arial";
    ctx.fillStyle = "white";
    ctx.fillText("LP FIT TECH",20,50);

    lastDataUrl = photoCanvas.toDataURL("image/png");
  };
  img.src = url;
};

downloadBtn.onclick = ()=>{
  if(!lastDataUrl){
    alert("Tire uma foto primeiro.");
    return;
  }

  const a = document.createElement("a");
  a.href = lastDataUrl;
  a.download = "lp-fit-foto.png";
  a.click();
};
</script>

</body>
</html>
